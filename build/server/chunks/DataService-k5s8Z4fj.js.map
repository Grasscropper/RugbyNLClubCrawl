{"version":3,"file":"DataService-k5s8Z4fj.js","sources":["../../../.svelte-kit/adapter-node/chunks/DataService.js"],"sourcesContent":["import * as fs from \"fs\";\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\nclass DataService {\n  static UpdateLeagueData(matchTables) {\n    let json = JSON.stringify(matchTables);\n    const filePath = DataService.GetFilePath();\n    fs.mkdirSync(path.dirname(filePath), { recursive: true });\n    fs.writeFileSync(filePath, json);\n  }\n  // public static GetTeamMatches(teamName: string): MatchRow[] {\n  //     let allMatches = JSON.parse(fs.readFileSync('static/data/matches.json', 'utf-8')) as MatchTable[];\n  //     let result = allMatches.reduce((acc, cur) => [...acc, ...cur.Matches], [] as MatchRow[])\n  //         .filter(a_item => a_item.HomeTeam == teamName || a_item.AwayTeam == teamName);\n  //     result.forEach(a_item => a_item.Date = new Date(a_item.Date));\n  //     return result.sort((a, b) => a.Date.getTime() - b.Date.getTime());\n  // }\n  // public static GetClubMatches(clubName: string): MatchRow[] {\n  //     let allMatches = JSON.parse(fs.readFileSync('static/data/matches.json', 'utf-8')) as MatchTable[];\n  //     let matchString = `${clubName} `;\n  //     let result = allMatches.reduce((acc, cur) => [...acc, ...cur.Matches], [] as MatchRow[])\n  //         .filter(a_item => a_item.HomeTeam.startsWith(matchString) || a_item.AwayTeam.startsWith(matchString));\n  //     result.forEach(a_item => a_item.Date = new Date(a_item.Date));\n  //     return result.sort((a, b) => a.Date.getTime() - b.Date.getTime());\n  // }\n  static GetAllMatches() {\n    try {\n      const filePath = DataService.GetFilePath();\n      console.log(filePath);\n      const leagues = JSON.parse(fs.readFileSync(filePath, \"utf-8\"), DataService.JsonReviver);\n      const result = leagues.reduce((acc, cur) => {\n        return [...acc, ...cur.Matches];\n      }, []);\n      result.forEach((a_item) => {\n        const [hours, minutes] = a_item.Time.split(\":\").map(Number);\n        if (minutes != void 0) {\n          a_item.Date.setHours(hours, minutes);\n        }\n      });\n      result.sort((a, b) => a.Date.getTime() - b.Date.getTime());\n      return result;\n    } catch (e) {\n      console.error(\"‚ùå Failed to load matches.json:\", e);\n      return [];\n    }\n  }\n  static JsonReviver(key, value) {\n    if (key === \"Date\") {\n      return new Date(value);\n    }\n    return value;\n  }\n  static GetDirPath() {\n    const __filename = fileURLToPath(import.meta.url);\n    const __dirname = path.dirname(__filename);\n    const filePath = path.join(__dirname, \"..\", \"..\", \"..\", \"data\");\n    return filePath;\n  }\n  static GetFilePath() {\n    const __filename = fileURLToPath(import.meta.url);\n    const __dirname = path.dirname(__filename);\n    const filePath = path.join(__dirname, \"..\", \"..\", \"..\", \"data\", \"matches.json\");\n    return filePath;\n  }\n}\nexport {\n  DataService as D\n};\n"],"names":[],"mappings":";;;;AAGA,MAAM,WAAW,CAAC;AAClB,EAAE,OAAO,gBAAgB,CAAC,WAAW,EAAE;AACvC,IAAI,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC;AAC1C,IAAI,MAAM,QAAQ,GAAG,WAAW,CAAC,WAAW,EAAE;AAC9C,IAAI,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;AAC7D,IAAI,EAAE,CAAC,aAAa,CAAC,QAAQ,EAAE,IAAI,CAAC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO,aAAa,GAAG;AACzB,IAAI,IAAI;AACR,MAAM,MAAM,QAAQ,GAAG,WAAW,CAAC,WAAW,EAAE;AAChD,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;AAC3B,MAAM,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC,QAAQ,EAAE,OAAO,CAAC,EAAE,WAAW,CAAC,WAAW,CAAC;AAC7F,MAAM,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,KAAK;AAClD,QAAQ,OAAO,CAAC,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC;AACvC,OAAO,EAAE,EAAE,CAAC;AACZ,MAAM,MAAM,CAAC,OAAO,CAAC,CAAC,MAAM,KAAK;AACjC,QAAQ,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AACnE,QAAQ,IAAI,OAAO,IAAI,KAAK,CAAC,EAAE;AAC/B,UAAU,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,OAAO,CAAC;AAC9C;AACA,OAAO,CAAC;AACR,MAAM,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;AAChE,MAAM,OAAO,MAAM;AACnB,KAAK,CAAC,OAAO,CAAC,EAAE;AAChB,MAAM,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,CAAC,CAAC;AACxD,MAAM,OAAO,EAAE;AACf;AACA;AACA,EAAE,OAAO,WAAW,CAAC,GAAG,EAAE,KAAK,EAAE;AACjC,IAAI,IAAI,GAAG,KAAK,MAAM,EAAE;AACxB,MAAM,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC;AAC5B;AACA,IAAI,OAAO,KAAK;AAChB;AACA,EAAE,OAAO,UAAU,GAAG;AACtB,IAAI,MAAM,UAAU,GAAG,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;AACrD,IAAI,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;AAC9C,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC;AACnE,IAAI,OAAO,QAAQ;AACnB;AACA,EAAE,OAAO,WAAW,GAAG;AACvB,IAAI,MAAM,UAAU,GAAG,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;AACrD,IAAI,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;AAC9C,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,cAAc,CAAC;AACnF,IAAI,OAAO,QAAQ;AACnB;AACA;;;;"}